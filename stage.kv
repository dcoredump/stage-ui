#: import stage stage
#: import ListItemButton kivy.uix.listview.ListItemButton
#: import ListAdapter kivy.adapters.listadapter.ListAdapter

StageRoot:

<SelectPedalboardButton>:
    size: (100, '80dp')
    on_press: stage.load_pedalboard(self.text)

<StageRoot>:
    StageScreens

<StageScreens>:
    modui_button: mod_ui_button_id
    jack_button: jack_button_id
    preset_list: preset_list_id

    orientation: 'vertical'
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1.0,0.1
        Button:
            text: "Pedalboard"
            on_state: _screen_manager.current = 'Pedalboard'
        #Button:
        #    text: "Sound"
        #    on_state: _screen_manager.current = 'Sound'
        Button:
            text: "System"
            on_state: _screen_manager.current = 'System'
    BoxLayout:
        orientation: 'vertical'
        ScreenManager:
            id: _screen_manager
            Screen:
                name: 'Pedalboard'
                BoxLayout:
                    orientation: 'horizontal'
                    padding: 20
                    spacing: 20
                    ListView:
                        id: preset_list_id
                        adapter:
                            #ListAdapter(data=stage.get_pedalboard_names(), allow_empty_selection=False, selection_mode='single', cls=stage.SelectPedalboardButton)
                            ListAdapter(data=stage.get_pedalboard_names(), selection_mode='single', cls=stage.SelectPedalboardButton)
                    #BoxLayout:
                    #    orientation: 'vertical'
                    #    padding: 40
                    #    spacing: 40
                    #    Label:
                    #        text: "Preset1"
                    #    Label:
                    #        text: "Preset2"
                    #    Label:
                    #        text: "Preset3"
            #Screen:
            #    name: 'Sound'
            #    Label:
            #        text: 'Sound'
            Screen:
                name: 'System'
                BoxLayout:
                    padding: 40
                    spacing: 40
                    orientation: 'vertical'
                    ToggleButton:
                        id: mod_ui_button_id
                        text: "MOD-UI"
                        state: root.set_modui_button_state()
                        on_state: root.change_modui_button_state()
                    Button:
                        id: jack_button_id
                        text: "Restart Audio backend"
                        on_press: root.restart_jack()
                    BoxLayout:
                        spacing: 40
                        Button:
                            text: "Restart"
                            on_press: stage.quit()
                        Button:
                            text: "Halt system"
                            on_press: stage.halt()
                        Button:
                            text: "Reboot system"
                            on_press: stage.restart()
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1.0,0.08
        padding: 10
        spacing: 10
        Image:
            height: 40
            source: 'zynthian-stage-logo.png'
        Label:
            id: xrun_counter_id
            color: 1,0,0,1
        Label:
            id: mod_host_status_id
